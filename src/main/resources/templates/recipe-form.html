<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Nova Receita - CulináriOO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { darkMode: 'class' }
    </script>
</head>
<body class="bg-gray-50 dark:bg-stone-950 text-gray-800 dark:text-gray-200 font-sans min-h-screen flex flex-col transition-colors duration-300">

    <header th:replace="~{fragments/menu :: nav-content}"></header>

    <main class="flex-1 max-w-2xl mx-auto w-full p-6">
        
        <div class="bg-white dark:bg-stone-900 p-8 rounded-xl shadow-lg border border-gray-200 dark:border-stone-800">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-6 border-b border-gray-100 dark:border-stone-800 pb-2">
                <span th:text="${receita != null} ? 'Editar Receita' : 'Nova Receita'">Receita</span>
            </h2>

            <form action="/recipes/save" method="post" class="flex flex-col gap-5">
                
                <input type="hidden" name="id" th:value="${receita?.id}">

                <div>
                    <label class="block text-sm font-bold text-gray-600 dark:text-stone-400 mb-1">Nome da Receita</label>
                    <input type="text" name="nome" required th:value="${receita?.nome}"
                           class="w-full bg-gray-50 dark:bg-stone-800 border border-gray-300 dark:border-stone-600 text-gray-800 dark:text-white p-3 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-200 dark:focus:ring-orange-900 focus:outline-none transition">
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-bold text-gray-600 dark:text-stone-400 mb-1">Tipo</label>
                        <select name="tipoReceita" class="w-full bg-gray-50 dark:bg-stone-800 border border-gray-300 dark:border-stone-600 text-gray-800 dark:text-white p-3 rounded-lg focus:border-orange-500 focus:outline-none">
                            <option value="SALGADA" th:selected="${receita != null and receita.getTipoEtiqueta() == 'Salgado'}">Salgada</option>
                            <option value="DOCE" th:selected="${receita != null and receita.getTipoEtiqueta() == 'Doce'}">Doce</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-bold text-gray-600 dark:text-stone-400 mb-1">Categoria</label>
                        <select name="categoria" class="w-full bg-gray-50 dark:bg-stone-800 border border-gray-300 dark:border-stone-600 text-gray-800 dark:text-white p-3 rounded-lg focus:border-orange-500 focus:outline-none">
                            <option th:each="cat : ${T(com.culinarioo.model.Categoria).values()}"
                                    th:value="${cat}" th:text="${cat}"
                                    th:selected="${receita != null and receita.categoria == cat}">
                            </option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-600 dark:text-stone-400 mb-1">Ingredientes (Separados por vírgula)</label>
                    <input type="text" name="ingredientesTexto" placeholder="Ex: Farinha, Ovo, Leite"
                           th:value="${receita != null} ? ${#strings.listJoin(receita.ingredientes.![nome], ', ')} : ''"
                           class="w-full bg-gray-50 dark:bg-stone-800 border border-gray-300 dark:border-stone-600 text-gray-800 dark:text-white p-3 rounded-lg focus:border-orange-500 focus:outline-none">
                </div>

                <div>
                    <label class="block text-sm font-bold text-gray-600 dark:text-stone-400 mb-1">Modo de Preparo</label>
                    <textarea name="modoPreparo" rows="4" required th:text="${receita?.modoPreparo}"
                              class="w-full bg-gray-50 dark:bg-stone-800 border border-gray-300 dark:border-stone-600 text-gray-800 dark:text-white p-3 rounded-lg focus:border-orange-500 focus:outline-none"></textarea>
                </div>

                <button type="submit" 
                        class="mt-2 bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-4 rounded-lg shadow-md transition transform active:scale-95 flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Salvar Receita
                </button>

            </form>
        </div>

    </main>
</body>
</html>